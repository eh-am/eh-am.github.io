{{ define "title" }}
  {{ .Title }} Â· {{ .Site.Title }}
{{ end }}
{{ define "content" }}
  <link  href="{{ "/js/nanogallery2.min.css" | urlize | relURL }}" rel="stylesheet" type="text/css" />
  <script defer language="javascript" type="text/javascript"  src="{{ "/js/jquery.min.js" | urlize | relURL }}"></script>
  <script defer language="javascript" type="text/javascript"  src="{{ "/js/jquery.nanogallery2.min.js" | urlize | relURL }}"></script>

  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">{{ .Title }}</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}'>
                {{ .Date.Format (default "January 2, 2006") }}
              </time>
            </span>
          </div>

          <div id="nanogallery2" data-nanogallery2 = '{
                        "thumbnailHeight":  "auto",
                        "thumbnailWidth":   600,
                        "thumbnailBorderVertical": 0,
                        "thumbnailBorderHorizontal": 0,
                           "viewerToolbar":   {
        "display":    true,
        "standard":   "minimizeButton, label",
        "minimized":  "minimizeButton, label, downloadButton"
      },
   "viewerTools":     {
        "topLeft":    "pageCounter",
        "topRight":   "playPauseButton, closeButton"
      }
                      }' >
      {{ with .Resources.ByType "image" }}
      {{ range . }}
        {{ $resized := (.Resize "600x") }}

        {{ if (fileExists (replace .Name "jpg" "NEF")) -}}
          {{ $file := "XD" }}
        {{ else }}
          {{ $file := .RelPermalink }}
        {{- end }}

        {{ $rawFile := (replace .RelPermalink ".jpg" ".NEF") }}
        {{ $downloadURL := cond (fileExists $rawFile) $rawFile .Permalink }}

        <a href="{{ .RelPermalink }}" data-ngthumb="{{ $resized.RelPermalink }}" data-ngdownloadurl="{{ $downloadURL }}">
        </a>
      {{ end }}
      {{ end }}
          </div>

        </div>
      </header>

      <div>
        {{ .Content }}
      </div>

      <footer>
        {{ partial "posts/series.html" . }}
        {{ partial "posts/disqus.html" . }}
        {{ partial "posts/commento.html" . }}
        {{ partial "posts/utteranc.html" . }}
      </footer>
    </article>

    {{ partial "posts/math.html" . }}
  </section>
{{ end }}

